%h1 Dashboard#index
%p Find me in app/views/dashboard/index.html.haml


%div{"data-dashboards-type-value": 'bar', "data-dashboards-data-value": @chart_data.to_json, "data-dashboards-options-value": @chart_options.to_json, "data-dashboards-headers-value": @headers.to_json, "data-dashboards-rows-value": @rows.to_json, "data-controller": "dashboards", "data-index": params[:file_upload_id]}
  %div
    = label_tag :column_names
    = select_tag :column_names, options_from_collection_for_select(@headers, :id, :name), include_blank: false , multiple: true, "data-dashboards-target":  "columnNames"
  %div
    = label_tag :group_by
    = select_tag :group_by, options_from_collection_for_select(@headers, :id, :name), include_blank: false , data: { dashboards_target: 'groupBy' }
  %canvas{ "data-dashboards-target":  "canvas"}

= line_chart CsvRow.group_by_day(:created_at).count

= line_chart({"2021-01-01" => 2, "2021-01-02" => 3})

= line_chart [["2021-01-01", 2], ["2021-01-02", 3]]

= bar_chart CsvRow.group_by_day(:created_at).sum(:file_upload_id)

= line_chart CsvRow.group_by_day(:created_at).sum(:file_upload_id)

= column_chart CsvRow.group_by_day(:created_at).sum(:file_upload_id)

-# %canvas{data: {controller: "chart", chart: {"data-value" => @chart_data.to_json, "options-value" => @chart_options.to_json} } }

-# %canvas{"data-chart-data-value" => "#{@chart_data.to_json}", "data-chart-options-value" => "#{@chart_options.to_json}", "data-controller" => "chart"}

-# %canvas{"data-controller": "dashboards"}

-# = simple_form_for :dashboard_index_path do |f|
-#   = f.input :username, as: :select
-#   = f.button :submit, 'Search'
  -# = f.input :username
  -# = f.input :password
  -# = f.button :submit